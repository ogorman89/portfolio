---
import MetaHead from "@components/general/MetaHead.astro";
import Layout from "@layouts/Layout.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from '../config';

// Use Astro.glob() to fetch all posts, and then sort them by date.

const posts = (await Astro.glob('./blog/*.{md,mdx}')).sort(
	(a, b) =>
		new Date(b.frontmatter.date).valueOf() - new Date(a.frontmatter.date).valueOf()
);
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <MetaHead
      title={SITE_TITLE}
      description={SITE_DESCRIPTION}
      ogImageUrl={"/assets/images/profile.png"}
    />
    <!-- <style>
        ul {
            list-style-type: none;
            padding: unset;
        }
        ul li {
            display: flex;
        }
        ul li time {
            flex: 0 0 130px;
            font-style: italic;
            color: #888;
        }
        ul li a:visited {
            color: #8e32dc;
        }
    </style> -->
  </head>

  <body>
    <Layout>
        <h1 style="line-height: 1.2;">Blog</h1>
        <content>
            <ul>
                {posts.map((post) => (
                    <li>
                        <time datetime={post.frontmatter.date}>
                            {new Date(post.frontmatter.date).toLocaleDateString('en-us', {
                                year: 'numeric',
                                month: 'short',
                                day: 'numeric',
                            })}
                        </time>
                        <a href={post.url}>{post.frontmatter.title}</a>
                    </li>
                ))}
            </ul>
        </content>
    </Layout>
  </body>
</html>